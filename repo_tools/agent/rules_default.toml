# Default agent command rules for repokit-managed repositories.
# Project-specific rules go in tools/agent/rules.toml and extend these.

default_reason = "try another approach"

# ── Deny rules ───────────────────────────────────────────────────────

[[deny]]
name = "destructive"
patterns = ['^rm\b', '^rmdir\b', '^del\b']
dir = "!project_root"
reason = "destructive file operations are only allowed within the project tree"

[[deny]]
name = "admin"
patterns = ['^sudo\b', '^su\b', '^runas\b']
reason = "elevated privilege commands are not permitted"

# ── Allow rules ──────────────────────────────────────────────────────

[[allow]]
name = "repo-tools"
patterns = ['^\./repo\b']
dir = "project_root"

[[allow]]
name = "file_inspection"
patterns = ['^cat\b', '^head\b', '^tail\b', '^less\b', '^wc\b', '^file\b', '^type\b']

[[allow]]
name = "navigation"
patterns = ['^cd\b', '^ls\b', '^dir\b', '^tree\b', '^find\b', '^fd\b']

[[allow]]
name = "search"
patterns = ['^grep\b', '^rg\b', '^findstr\b', '^ag\b']

[[allow]]
name = "shell"
patterns = ['^echo\b', '^printf\b', '^test\b', '^\[', '^true\b', '^false\b', '^expr\b', '^sleep\b']

[[allow]]
name = "text_processing"
patterns = ['^xargs\b', '^sort\b', '^uniq\b', '^cut\b', '^awk\b', '^sed\b', '^tr\b', '^tee\b']

[[allow]]
name = "system_info"
patterns = ['^which\b', '^where\b', '^env\b', '^printenv\b', '^pwd\b', '^whoami\b', '^date\b', '^uname\b']

[[allow]]
name = "version_control"
patterns = ['^git\b', '^gh\b']

[[allow]]
name = "destructive_in_project"
patterns = ['^rm\b', '^rmdir\b', '^del\b']
dir = "project_root"

[[allow]]
name = "network"
patterns = ['^curl\b', '^wget\b']

[[allow]]
name = "control_flow"
patterns = ['^for\b', '^if\b', '^while\b', '^case\b', '^bash\b', '^sh\b']
